/*! jCountdown jQuery Plugin - v1.5.0b1 - 2012-12-24
* https://github.com/tomgrohl/jCountdown/
* Copyright (c) 2012 Tom Ellis; Licensed MIT */
(function(e){e.fn.countdown=function(t){var n=Array.prototype.slice,r=window.clearInterval,i=Math.floor,s=36e5,o=31556926,u=2629743.83,a=604800,f=86400,l=3600,c=60,h=1,p=function(t,n){var r=t.toString().match(/\d/g),i="";return e.each(r,function(e,t){t=Number(t),i+=""+n.digits[t]||""+t}),i},d=function(t){var n="",r=e("<div>"),i=e("<"+t.timeWrapElement+">").addClass(t.timeWrapClass),s=e("<"+t.textWrapElement+">").addClass(t.textWrapClass),o=t.timeSeparator,u=t.yearsLeft,a=t.monthsLeft,f=t.weeksLeft,l=t.daysLeft,c=t.hrsLeft,h=t.minsLeft,d=t.secLeft,v=!1,m=!1,g=!1,y=!1,b=!1,w=!1,E=!1,S=[],x=function(e){S.push(function(){r.append(i.clone().html(e+" "))})},T=function(e){S.push(function(){r.append(s.clone().html(e+" "))})},N=function(){S.push(function(){r.append(s.clone().html(" "+o+" "))})};t.omitZero&&(t.yearsAndMonths&&(t.yearsLeft||(v=!0),t.monthsLeft||(m=!0)),t.weeks&&(t.yearsAndMonths&&m&&!t.weeksLeft||!t.yearsAndMonths&&!t.weeksLeft)&&(g=!0),g&&!l&&(y=!0),y&&!c&&(b=!0),b&&!h&&(w=!0)),t.leadingZero&&(u<10&&(u="0"+u),a<10&&(a="0"+a),f<10&&(f="0"+f),l<10&&(l="0"+l),c<10&&(c="0"+c),h<10&&(h="0"+h),d<10&&(d="0"+d)),u=p(u,t),a=p(a,t),f=p(f,t),l=p(l,t),c=p(c,t),h=p(h,t),d=p(d,t);if(t.yearsAndMonths){if(!t.omitZero||!v)x(u),T(t.yearText),N();if(!t.omitZero||!v&&a||!v&&!m)x(a),T(t.monthText),N()}return t.weeks&&!g&&(x(f),T(t.weekText),N()),y||(x(l),T(t.dayText),N()),b||(x(c),T(t.hourText),N()),w||(x(h),T(t.minText),N()),x(d),T(t.secText),t.isRTL===!0&&S.reverse(),e.each(S,function(e,t){t()}),n=r.html(),n},v=function(e){var t=new Date,n=e.data("jcdData");return n?(n.offset!==null&&(t=m(n.offset)),t.setMilliseconds(0),t):new Date},m=function(e){var t,n,r,i=new Date;return e!==null&&(t=e*s,r=i.getTime()- -i.getTimezoneOffset()/60*s+t,n=i.setTime(r)),new Date(n)},g=function(){var e=this,t,n,s,p,m=0,g=0,y=0,b=0,w=0,E=0,S=0,x="",T,N=function(e){var t;return t=i(T/e),T-=t*e,t},C=e.data("jcdData");if(!C)return!1;t=C.htmlTemplate,n=v(e),C.serverDiff!==null?s=new Date(C.serverDiff+C.clientdateNow.getTime()):s=C.dateObj,s.setMilliseconds(0),p=C.direction==="down"?s.getTime()-n.getTime():n.getTime()-s.getTime(),T=Math.round(p/1e3),b=N(f),w=N(l),E=N(c),S=N(h),C.yearsAndMonths&&(T+=b*f,m=N(o),g=N(u),b=N(f)),C.weeks&&(T+=b*f,y=N(a),b=N(f)),C.hoursOnly&&(w+=b*24,b=0),C.minsOnly&&(E+=w*60+b*24*60,b=w=0),C.secsOnly&&(S+=E*60,b=w=E=0),C.yearsLeft=m,C.monthsLeft=g,C.weeksLeft=y,C.daysLeft=b,C.hrsLeft=w,C.minsLeft=E,C.secLeft=S,e.data("jcdData",C),C.direction==="down"&&(n<s||C.minus)||C.direction==="up"&&(s<n||C.minus)?x=d(C):(C.yearsLeft=C.monthsLeft=C.weeksLeft=C.daysLeft=C.hrsLeft=C.minsLeft=C.secLeft=0,x=d(C),C.hasCompleted=!0),e.html(x).triggerMulti("change.jcdevt,countChange",[C]),C.hasCompleted&&(e.triggerMulti("complete.jcdevt,countComplete"),r(C.timer)),e.data("jcdData",C)},y={init:function(t){var n=e.extend({},e.fn.countdown.defaults,t),r=null,i,s;return this.each(function(){var r=e(this),o={},u;r.data("jcdData")&&(r.countdown("changeSettings",t,!0),n=r.data("jcdData"));if(n.date===null&&n.dataAttr===null)return e.error("No Date passed to jCountdown. date option is required."),!0;n.date?s=n.date:s=r.data(n.dataAttr),i=new Date(s),i.toString()==="Invalid Date"&&e.error("Invalid Date passed to jCountdown: "+s),n.onStart&&r.on("start.jcdevt",n.onStart),n.onChange&&r.on("change.jcdevt",n.onChange),n.onComplete&&r.on("complete.jcdevt",n.onComplete),n.onPause&&r.on("pause.jcdevt",n.onPause),n.onResume&&r.on("resume.jcdevt",n.onResume),n.onLocaleChange&&r.on("locale.jcdevt",n.onLocaleChange),o=e.extend({},n),o.clientdateNow=new Date,o.clientdateNow.setMilliseconds(0),o.originalHTML=r.html(),o.dateObj=new Date(s),o.dateObj.setMilliseconds(0),o.hasCompleted=!1,o.timer=0,o.yearsLeft=o.monthsLeft=o.weeksLeft=o.daysLeft=o.hrsLeft=o.minsLeft=o.secLeft=0,o.difference=null,u=e.proxy(g,r),o.timer=setInterval(u,o.updateTime),r.data("jcdData",o).triggerMulti("start.jcdevt,countStart",[o]),u()})},changeSettings:function(t,n){return this.each(function(){var i=e(this),s,o,u=e.proxy(g,i);if(!i.data("jcdData"))return!0;s=e.extend({},i.data("jcdData"),t),t.hasOwnProperty("date")&&(o=new Date(t.date),o.toString()==="Invalid Date"&&e.error("Invalid Date passed to jCountdown: "+t.date)),s.completed=!1,s.dateObj=new Date(t.date),r(s.timer),i.off(".jcdevt").data("jcdData",s),n||(s.onChange&&i.on("change.jcdevt",s.onChange),s.onComplete&&i.on("complete.jcdevt",s.onComplete),s.onPause&&i.on("pause.jcdevt",s.onPause),s.onResume&&i.on("resume.jcdevt",s.onResume),s.timer=setInterval(u,s.updateTime),i.data("jcdData",s),u()),s=null})},resume:function(){return this.each(function(){var t=e(this),n=t.data("jcdData"),r=e.proxy(g,t);if(!n)return!0;t.data("jcdData",n).trigger("resume.jcdevt",[n]).trigger("countResume",[n]);if(!n.hasCompleted){n.timer=setInterval(r,n.updateTime);if(n.stopwatch&&n.direction==="up"){var i=v(t).getTime()-n.pausedAt.getTime(),s=new Date;s.setTime(n.dateObj.getTime()+i),n.dateObj=s}r()}})},pause:function(){return this.each(function(){var t=e(this),n=t.data("jcdData");if(!n)return!0;n.stopwatch&&(n.pausedAt=v(t)),r(n.timer),t.data("jcdData",n).triggerMulti("pause.jcdevt,countPause",[n])})},complete:function(){return this.each(function(){var t=e(this),n=t.data("jcdData");if(!n)return!0;r(n.timer),n.hasCompleted=!0,t.data("jcdData",n).triggerMulti("complete.jcdevt,countComplete",[n])})},destroy:function(){return this.each(function(){var t=e(this),n=t.data("jcdData");if(!n)return!0;r(n.timer),t.off(".jcdevt").removeData("jcdData").html(n.originalHTML)})},getSettings:function(t){var n=e(this),r=n.data("jcdData");return t&&r?r.hasOwnProperty(t)?r[t]:undefined:r},changeLocale:function(t){var n=e(this),r=n.data("jcdData");return e.fn.countdown.locale[t]?(e.extend(r,e.fn.countdown.locale[t]),n.data("jcdData",r).triggerMulti("locale.jcdevt,localeChange",[r]),!0):(e.error("Locale '"+t+"' does not exist"),!1)}};if(y[t])return y[t].apply(this,n.call(arguments,1));if(typeof t=="object"||!t)return y.init.apply(this,arguments);e.error("Method "+t+" does not exist in the jCountdown Plugin")},e.fn.countdown.defaults={date:null,dataAttr:null,updateTime:1e3,yearText:"years",monthText:"months",weekText:"weeks",dayText:"days",hourText:"hours",minText:"mins",secText:"sec",digits:[0,1,2,3,4,5,6,7,8,9],timeWrapElement:"span",textWrapElement:"span",timeWrapClass:"",textWrapClass:"cd-time",timeSeparator:"",isRTL:!1,minus:!1,onStart:null,onChange:null,onComplete:null,onResume:null,onPause:null,onLocaleChange:null,leadingZero:!1,offset:null,serverDiff:null,hoursOnly:!1,minsOnly:!1,secsOnly:!1,weeks:!1,hours:!1,yearsAndMonths:!1,direction:"down",stopwatch:!1,omitZero:!1},e.fn.countdown.locale=[],e.fn.triggerMulti=function(t,n){var r=t.split(",");return this.each(function(){var t=e(this);for(var i=0;i<r.length;i++)t.trigger(r[i],n)})}})(jQuery);