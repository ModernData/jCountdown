/* jCountdown 1.4.1 jQuery Plugin | Copyright 2012 Tom Ellis http://www.webmuse.co.uk | MIT Licensed (license.txt) */
(function(h){h.fn.countdown=function(n){var s={date:null,updateTime:1E3,htmlTemplate:"%d <span class='cd-time'>days</span> %h <span class='cd-time'>hours</span> %i <span class='cd-time'>mins</span> %s <span class='cd-time'>sec</span>",minus:false,onChange:null,onComplete:null,onResume:null,onPause:null,leadingZero:false,offset:null,servertime:null,hoursOnly:false,minsOnly:false,secsOnly:false,hours:false,yearsAndMonths:false,direction:"down"},t=[].slice,o=window.clearInterval,m=Math.floor,u=Math.ceil,
v=/(%y|%m|%d|%h|%i|%s)/g,w=/%y/,x=/%m/,y=/%d/,z=/%h/,A=/%i/,B=/%s/,r=function(c,a){var e,b;b=new Date;if(c===null)b=b.getTime()-a;else{e=c*36E5;e=b.getTime()- -b.getTimezoneOffset()/60*36E5+e;b=b.setTime(e)}return new Date(b)},p=function(){var c,a,e,b,f,g,i,k,l;c="";var j,d=this.data("jcdData");if(!d)return false;c=d.htmlTemplate;a=d.offset===null&&d.servertime===null?new Date:d.offset!==null?r(d.offset):r(null,d.difference);e=new Date(d.date);b=d.direction==="down"?e.getTime()-a.getTime():a.getTime()-
e.getTime();j=Math.round(b/1E3);l=j%60;j=m(j/60);k=j%60;j=m(j/60);i=j%24;b=j=m(j/24);if(d.yearsAndMonths){f=m(j/365);j=m(j%365);g=m(j/30);if(g===12){f=1;g=0;j=12}b=u(j%30)}if(d.hoursOnly){i+=b*24;b=0}if(d.minsOnly){k+=i*60+b*24*60;i=b=0}if(d.secsOnly){l+=k*60;k=i=b=0}d.yearsLeft=f;d.monthsLeft=g;d.daysLeft=b;d.hrsLeft=i;d.minsLeft=k;d.secLeft=l;if(l===60)l=0;if(d.leadingZero){if(b<10&&!d.hoursOnly)b="0"+b;if(f<10)f="0"+f;if(g<10)g="0"+g;if(i<10)i="0"+i;if(k<10)k="0"+k;if(l<10)l="0"+l}if(d.direction===
"down"&&(a<e||d.minus)||d.direction==="up"&&(e<a||d.minus)){c=c.replace(w,f).replace(x,g);c=c.replace(y,b).replace(z,i).replace(A,k).replace(B,l)}else{c=c.replace(v,"00");d.hasCompleted=true}this.html(c).trigger("change.jcdevt",[d]);if(d.hasCompleted){this.trigger("complete.jcdevt");o(d.timer)}},q={init:function(c){var a=h.extend({},s,c),e,b;return this.each(function(){var f=h(this),g={},i;if(f.data("jcdData")){f.countdown("changeSettings",c,true);a=f.data("jcdData")}if(a.date===null){h.error("No Date passed to jCountdown. date option is required.");
return true}b=new Date(a.date);b.toString()==="Invalid Date"&&h.error("Invalid Date passed to jCountdown: "+a.date);b=null;a.onChange&&f.on("change.jcdevt",a.onChange);a.onComplete&&f.on("complete.jcdevt",a.onComplete);a.onPause&&f.on("pause.jcdevt",a.onPause);a.onResume&&f.on("resume.jcdevt",a.onResume);g={originalHTML:f.html(),date:a.date,yearsAndMonths:a.yearsAndMonths,hoursOnly:a.hoursOnly,minsOnly:a.minsOnly,secsOnly:a.secsOnly,leadingZero:a.leadingZero,updateTime:a.updateTime,direction:a.direction,
template:a.htmlTemplate,htmlTemplate:a.htmlTemplate,minus:a.minus,offset:a.offset,servertime:a.servertime,difference:null,onChange:a.onChange,onComplete:a.onComplete,onResume:a.onResume,onPause:a.onPause,hasCompleted:false,timer:0};if(a.servertime!==null){e=new Date;i=h.isFunction(g.servertime)?g.servertime():g.servertime;g.difference=e.getTime()-i}i=h.proxy(p,f);g.timer=setInterval(i,g.updateTime);f.data("jcdData",g);i()})},changeSettings:function(c,a){return this.each(function(){var e=h(this),b,
f,g=h.proxy(p,e);if(!e.data("jcdData"))return true;b=h.extend({},e.data("jcdData"),c);if(c.hasOwnProperty("date")){f=new Date(c.date);f.toString()==="Invalid Date"&&h.error("Invalid Date passed to jCountdown: "+c.date)}b.completed=false;o(b.timer);e.off(".jcdevt").data("jcdData",b);if(!a){b.onChange&&e.on("change.jcdevt",b.onChange);b.onComplete&&e.on("complete.jcdevt",b.onComplete);b.onPause&&e.on("pause.jcdevt",b.onPause);b.onResume&&e.on("resume.jcdevt",b.onResume);b.timer=setInterval(g,b.updateTime);
e.data("jcdData",b);g()}})},resume:function(){return this.each(function(){var c=h(this),a=c.data("jcdData"),e=h.proxy(p,c);if(!a)return true;c.data("jcdData",a).trigger("resume.jcdevt");if(!a.hasCompleted){a.timer=setInterval(e,a.updateTime);e()}})},pause:function(){return this.each(function(){var c=h(this),a=c.data("jcdData");if(!a)return true;o(a.timer);c.data("jcdData",a).trigger("pause.jcdevt")})},complete:function(){return this.each(function(){var c=h(this),a=c.data("jcdData");if(!a)return true;
o(a.timer);a.hasCompleted=true;c.data("jcdData",a).trigger("complete.jcdevt").off(".jcdevt")})},destroy:function(){return this.each(function(){var c=h(this),a=c.data("jcdData");if(!a)return true;o(a.timer);c.off(".jcdevt").removeData("jcdData").html(a.originalHTML)})},getSettings:function(c){var a=h(this).data("jcdData");if(c&&a){if(a.hasOwnProperty(c))return a[c]}else return a}};if(q[n])return q[n].apply(this,t.call(arguments,1));else if(typeof n==="object"||!n)return q.init.apply(this,arguments);
else h.error("Method "+n+" does not exist in the jCountdown Plugin")}})(jQuery);